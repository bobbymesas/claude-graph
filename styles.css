*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:       #090c12;
  --surf:     #0e1220;
  --surf2:    #131826;
  --border:   #1b2235;
  --border2:  #242e45;
  --text:     #ddd6c3;
  --dim:      #7d7566;
  --muted:    #424955;
  --accent:   #d4a853;
  --accent-b: rgba(212,168,83,.14);
  --accent-r: rgba(212,168,83,.3);
}

/* ── LIGHT THEME ─────────────────────────────────────────────── */
:root[data-theme="light"] {
  --bg:       #f5f1e8;
  --surf:     #fdfaf3;
  --surf2:    #f0ece1;
  --border:   #ddd5c2;
  --border2:  #c9c0ab;
  --text:     #1c170e;
  --dim:      #5c5346;
  --muted:    #9c9080;
  --accent:   #a67218;
  --accent-b: rgba(166,114,24,.12);
  --accent-r: rgba(166,114,24,.32);
}
@media (prefers-color-scheme: light) {
  :root[data-theme="system"] {
    --bg:       #f5f1e8;
    --surf:     #fdfaf3;
    --surf2:    #f0ece1;
    --border:   #ddd5c2;
    --border2:  #c9c0ab;
    --text:     #1c170e;
    --dim:      #5c5346;
    --muted:    #9c9080;
    --accent:   #a67218;
    --accent-b: rgba(166,114,24,.12);
    --accent-r: rgba(166,114,24,.32);
  }
}

html, body {
  width: 100%; height: 100%; overflow: hidden;
  background: var(--bg);
  color: var(--text);
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
}

/* ── TOP BAR ─────────────────────────────────────────────────── */
#topbar {
  position: fixed; top: 0; left: 0; right: 0; height: 48px;
  background: color-mix(in srgb, var(--bg) 88%, transparent);
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; padding: 0 24px; gap: 16px;
  z-index: 30; backdrop-filter: blur(12px);
}
#topbar-logo {
  font-family: 'JetBrains Mono', monospace;
  font-size: 11px; font-weight: 500;
  color: var(--accent); letter-spacing: .1em; text-transform: uppercase;
}
#topbar-sep { color: var(--border2); font-size: 20px; font-weight: 200; }
#topbar-sub {
  font-size: 10px; letter-spacing: .12em; text-transform: uppercase;
  color: var(--dim);
}
#topbar-hint {
  font-size: 10px; color: var(--muted); letter-spacing: .05em;
}

/* ── THEME TOGGLE ─────────────────────────────────────────────── */
.theme-toggle {
  display: flex; gap: 2px;
  background: var(--surf2); border: 1px solid var(--border);
  border-radius: 6px; padding: 3px;
}
.theme-btn {
  background: none; border: none; cursor: pointer;
  font-family: 'JetBrains Mono', monospace;
  font-size: 9px; letter-spacing: .08em; text-transform: uppercase;
  color: var(--muted); padding: 3px 9px; border-radius: 4px;
  transition: background .15s, color .15s;
}
.theme-btn:hover { color: var(--dim); }
.theme-btn.active { background: var(--accent-b); color: var(--accent); }

/* ── CANVAS ───────────────────────────────────────────────────── */
#canvas-wrap {
  position: fixed; inset: 48px 0 0 0; z-index: 1;
}
canvas { display: block; width: 100%; height: 100%; cursor: default; }

/* ── TOOLTIP ──────────────────────────────────────────────────── */
#tooltip {
  position: fixed; z-index: 40; pointer-events: none;
  background: var(--surf2);
  border: 1px solid var(--border2);
  border-radius: 8px; padding: 11px 15px;
  max-width: 230px; opacity: 0;
  transition: opacity .12s ease;
  box-shadow: 0 8px 32px rgba(0,0,0,.55);
}
#tooltip h3 {
  font-family: 'Playfair Display', serif; font-size: 14px; font-weight: 700;
  color: var(--accent); margin-bottom: 5px; letter-spacing: -.1px;
}
#tooltip p { font-size: 11px; color: var(--dim); line-height: 1.5; }
#tooltip .tt-cat {
  font-size: 9px; text-transform: uppercase; letter-spacing: .1em;
  margin-top: 7px; color: var(--muted);
}

/* ── SIDE PANEL ───────────────────────────────────────────────── */
#panel {
  position: fixed; top: 48px; right: 0; bottom: 0;
  width: 560px; min-width: 300px; max-width: 80vw;
  z-index: 20;
  background: var(--surf);
  border-left: 1px solid var(--border);
  display: flex; flex-direction: column;
  transform: translateX(100%);
  transition: transform .36s cubic-bezier(.4,0,.2,1);
  box-shadow: -20px 0 60px rgba(0,0,0,.4);
}
#panel.open { transform: translateX(0); }
#panel.resizing { transition: none; user-select: none; }

/* Resize handle */
#panel-resize {
  position: absolute; left: 0; top: 0; bottom: 0; width: 5px;
  cursor: ew-resize; z-index: 1;
}
#panel-resize::after {
  content: '';
  position: absolute; left: 2px; top: 50%; transform: translateY(-50%);
  width: 1px; height: 40px;
  background: var(--border2);
  border-radius: 1px;
  transition: background .15s, height .15s;
}
#panel-resize:hover::after { background: var(--accent-r); height: 56px; }
body.panel-resizing { cursor: ew-resize; user-select: none; }

/* Panel header */
.p-head {
  padding: 24px 24px 18px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0; position: relative;
}
.p-cat {
  font-size: 9px; text-transform: uppercase; letter-spacing: .14em;
  margin-bottom: 8px;
}
.p-title {
  font-family: 'Playfair Display', serif;
  font-size: 24px; font-weight: 700;
  color: var(--text); line-height: 1.2;
  margin-bottom: 10px;
}
#p-badges { display: flex; gap: 7px; flex-wrap: wrap; }

.badge {
  display: inline-flex; align-items: center; gap: 5px;
  padding: 3px 9px; border-radius: 20px;
  font-size: 10px; letter-spacing: .03em; border: 1px solid;
}
.badge-user   { background: #0c1e30; border-color: #1e5a8a; color: #5aaaf0; }
.badge-claude { background: #16142a; border-color: #5040a0; color: #c0a8f8; }
.badge-both   { background: #0e1e12; border-color: #2a7040; color: #55d46a; }
.badge-system { background: #151a15; border-color: #35453a; color: #70a07a; }
.badge-cat    {
  padding: 3px 9px; border-radius: 20px; font-size: 10px;
  letter-spacing: .03em; border: 1px solid;
}

#p-close {
  position: absolute; top: 20px; right: 20px;
  background: none; border: 1px solid var(--border2);
  border-radius: 5px; color: var(--dim); cursor: pointer;
  width: 26px; height: 26px; display: flex; align-items: center;
  justify-content: center; font-size: 14px; line-height: 1;
  transition: border-color .15s, color .15s, background .15s;
  font-family: inherit;
}
#p-close:hover { border-color: var(--accent-r); color: var(--accent); background: var(--accent-b); }

/* Panel scroll body */
.p-body {
  flex: 1; overflow-y: auto; padding: 20px 24px 36px;
  scrollbar-width: thin; scrollbar-color: var(--border2) transparent;
}
.p-body::-webkit-scrollbar { width: 4px; }
.p-body::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }

.p-desc {
  font-size: 13px; line-height: 1.8; color: #b0a898;
  margin-bottom: 20px; font-family: 'JetBrains Mono', monospace;
  font-weight: 300;
}

.p-doc-link {
  display: inline-flex; align-items: center; gap: 7px;
  padding: 8px 14px; border-radius: 6px; margin-bottom: 22px;
  background: var(--accent-b); border: 1px solid var(--accent-r);
  color: var(--accent); font-size: 11px; text-decoration: none;
  letter-spacing: .04em; transition: background .15s, border-color .15s;
}
.p-doc-link:hover { background: rgba(212,168,83,.22); border-color: rgba(212,168,83,.5); }
.p-doc-link svg { flex-shrink: 0; opacity: .7; }

/* Code accordion */
.code-block {
  border: 1px solid var(--border); border-radius: 8px;
  overflow: hidden; margin-bottom: 10px;
}
.cb-head {
  display: flex; align-items: center; justify-content: space-between;
  padding: 9px 13px; background: var(--surf2); cursor: pointer;
  user-select: none; gap: 10px;
}
.cb-head:hover { background: #181f30; }
.cb-label {
  display: flex; align-items: center; gap: 8px;
  font-size: 11px; color: var(--dim); min-width: 0; overflow: hidden;
}
.cb-filename {
  color: var(--text); font-weight: 500; font-size: 10.5px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.cb-sublabel {
  color: var(--muted); font-size: 10px; white-space: nowrap;
  overflow: hidden; text-overflow: ellipsis; flex-shrink: 1;
}
.cb-chevron {
  font-size: 9px; color: var(--muted); flex-shrink: 0;
  transition: transform .22s; line-height: 1;
}
.cb-chevron.open { transform: rotate(90deg); }
.cb-body {
  max-height: 0; overflow: hidden;
  transition: max-height .28s cubic-bezier(.4,0,.2,1);
}
.cb-body.open { max-height: 700px; }
.cb-body pre {
  margin: 0 !important; border-radius: 0 !important; border: none !important;
  font-size: 11.5px !important; line-height: 1.65 !important;
  font-family: 'JetBrains Mono', 'Fira Code', monospace !important;
  overflow-x: auto; white-space: pre;
}
.cb-body pre::-webkit-scrollbar { height: 4px; }
.cb-body pre::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }
.cb-note {
  font-size: 11.5px; line-height: 1.65; color: var(--dim);
  font-family: 'JetBrains Mono', monospace; font-weight: 300;
  padding: 10px 16px 12px;
  border-top: 1px solid var(--border);
  background: color-mix(in srgb, var(--surf2) 60%, transparent);
}

/* Related chips */
.p-related-title {
  font-size: 9px; text-transform: uppercase; letter-spacing: .12em;
  color: var(--muted); margin: 22px 0 10px;
}
.chips { display: flex; flex-wrap: wrap; gap: 6px; }
.chip {
  padding: 4px 11px; border-radius: 6px; font-size: 10.5px;
  border: 1px solid var(--border); color: var(--dim); cursor: pointer;
  background: var(--surf2); letter-spacing: .02em;
  transition: border-color .15s, color .15s, background .15s;
}
.chip:hover { border-color: var(--accent-r); color: var(--accent); background: var(--accent-b); }

/* ── NAV BACK BUTTON ─────────────────────────────────────────── */
#nav-back {
  display: none;
  position: fixed; bottom: 20px; left: 20px; z-index: 15;
  background: var(--surf2); border: 1px solid var(--border2);
  border-radius: 8px; color: var(--dim); cursor: pointer;
  font-family: 'JetBrains Mono', monospace;
  font-size: 13px; font-weight: 500; letter-spacing: .06em;
  padding: 10px 22px;
  transition: color .15s, border-color .15s, background .15s;
}
#nav-back:hover {
  color: var(--accent); border-color: var(--accent-r); background: var(--accent-b);
}

/* ── LEGEND ───────────────────────────────────────────────────── */
#legend {
  position: fixed; top: 68px; left: 20px; z-index: 10;
  background: color-mix(in srgb, var(--bg) 90%, transparent);
  border: 1px solid var(--border);
  border-radius: 10px; padding: 13px 16px;
  backdrop-filter: blur(10px);
}
.leg-title {
  font-size: 8px; text-transform: uppercase; letter-spacing: .15em;
  color: var(--muted); margin-bottom: 10px;
}
.leg-item { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }
.leg-item:last-child { margin-bottom: 0; }
.leg-dot { width: 9px; height: 9px; border-radius: 50%; flex-shrink: 0; }
.leg-label { font-size: 10px; color: var(--dim); }

/* ── PRIMACY/RECENCY PULSE ────────────────────────────────────── */
@keyframes pb-ring {
  0%   { r: 6;  opacity: .55; }
  60%  { r: 13; opacity: 0;   }
  100% { r: 13; opacity: 0;   }
}
.pb-ring { animation: pb-ring 2.4s ease-out infinite; }
.pb-ring-delay { animation: pb-ring 2.4s ease-out infinite; animation-delay: 1.2s; }

/* ── HLJS overrides ───────────────────────────────────────────── */
.hljs { background: #0d1117 !important; padding: 14px 16px !important; }

/* ── LOOP DIAGRAM ─────────────────────────────────────────────── */
.loop-svg-wrap {
  background: var(--surf); border: 1px solid var(--border);
  border-radius: 10px; padding: 28px 20px 20px;
  margin-bottom: 28px; overflow: hidden;
}
.loop-svg { width: 100%; height: auto; display: block; }
.loop-svg text { font-family: 'JetBrains Mono', monospace; }

/* ── LINK CARDS ───────────────────────────────────────────────── */
.ref-links-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
  gap: 10px;
}
.ref-link-card {
  display: block; padding: 14px 16px;
  background: var(--surf2); border: 1px solid var(--border);
  border-radius: 8px; text-decoration: none;
  transition: border-color .15s, background .15s;
}
.ref-link-card:hover { border-color: var(--accent-r); background: var(--accent-b); }
.rlc-title { font-size: 12px; font-weight: 500; color: var(--accent); margin-bottom: 4px; letter-spacing: .02em; }
.rlc-desc  { font-size: 11px; color: var(--dim); line-height: 1.5; font-weight: 300; }

/* ── TABS ─────────────────────────────────────────────────────── */
.tab-group {
  display: flex; gap: 4px; margin-left: 20px;
}
.tab-btn {
  background: none; border: 1px solid var(--border);
  border-radius: 5px; padding: 4px 12px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 10px; letter-spacing: .06em; text-transform: uppercase;
  color: var(--muted); cursor: pointer;
  transition: border-color .15s, color .15s, background .15s;
}
.tab-btn:hover { border-color: var(--border2); color: var(--dim); }
.tab-btn.active {
  border-color: var(--accent-r); color: var(--accent);
  background: var(--accent-b);
}

/* ── REFERENCE PANEL ──────────────────────────────────────────── */
#ref-panel {
  display: none;
  position: fixed; inset: 48px 0 0 0; z-index: 1;
  overflow-y: auto; padding: 52px 24px 72px;
  scrollbar-width: thin; scrollbar-color: var(--border2) transparent;
}
#ref-panel::-webkit-scrollbar { width: 5px; }
#ref-panel::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 3px; }
#ref-panel.active { display: block; }

.ref-container { max-width: 820px; margin: 0 auto; }

.ref-section { margin-bottom: 64px; }

.ref-section-label {
  font-size: 9px; text-transform: uppercase; letter-spacing: .16em;
  color: var(--muted); margin-bottom: 10px;
}
.ref-section h2 {
  font-family: 'Playfair Display', serif;
  font-size: 26px; font-weight: 700;
  color: var(--text); line-height: 1.2; margin-bottom: 14px;
}
.ref-section .ref-lead {
  font-size: 14px; line-height: 1.8; color: var(--dim);
  font-weight: 300; max-width: 640px; margin-bottom: 32px;
}

.ref-divider {
  border: none; border-top: 1px solid var(--border);
  margin-bottom: 32px;
}

/* Image card */
.ref-img-card {
  border: 1px solid var(--border); border-radius: 10px;
  overflow: hidden; margin-bottom: 28px;
  background: var(--surf);
}
.ref-img-card-header {
  padding: 10px 14px; background: var(--surf2);
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; gap: 8px;
}
.ref-img-card-header span {
  font-size: 10px; color: var(--dim); letter-spacing: .03em;
}
.ref-img-card-header .ref-img-filename {
  color: var(--text); font-weight: 500; font-size: 10.5px;
}
.ref-img-card img {
  display: block; width: 100%; height: auto;
  opacity: .92;
}

/* Inline code block for reference */
.ref-code-block {
  border: 1px solid var(--border); border-radius: 8px;
  overflow: hidden; margin-bottom: 28px;
}
.ref-code-block-header {
  padding: 10px 14px; background: var(--surf2);
  border-bottom: 1px solid var(--border);
  font-size: 10.5px; color: var(--text); font-weight: 500;
  letter-spacing: .02em;
  display: flex; align-items: center; justify-content: space-between;
}

/* ── COPY BUTTON ──────────────────────────────────────────────── */
.copy-btn {
  background: none; border: 1px solid transparent;
  cursor: pointer; border-radius: 4px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 9px; letter-spacing: .08em; text-transform: uppercase;
  color: var(--muted); padding: 2px 7px; flex-shrink: 0;
  transition: color .15s, border-color .15s, background .15s;
  line-height: 1.6;
}
.copy-btn:hover { color: var(--dim); border-color: var(--border2); background: var(--surf); }
.copy-btn.copied { color: #5ea878; border-color: #5ea87845; background: #5ea87810; }
.ref-code-block pre {
  margin: 0 !important; border-radius: 0 !important; border: none !important;
  font-size: 12px !important; line-height: 1.7 !important;
  font-family: 'JetBrains Mono', monospace !important;
}

/* ── CREDITS ──────────────────────────────────────────────────── */
.ref-credits {
  border-top: 1px solid var(--border);
  padding-top: 32px;
  margin-top: 16px;
}
.ref-credits-label {
  font-size: 9px; text-transform: uppercase; letter-spacing: .16em;
  color: var(--muted); margin-bottom: 14px;
}
.ref-credits-row {
  display: flex; align-items: flex-start; gap: 14px;
  padding: 16px; border-radius: 8px;
  background: var(--surf2); border: 1px solid var(--border);
  margin-bottom: 10px;
}
.ref-credits-icon {
  font-size: 20px; flex-shrink: 0; line-height: 1;
  margin-top: 2px; opacity: .8;
}
.ref-credits-body { min-width: 0; }
.ref-credits-name {
  font-size: 12px; font-weight: 500; color: var(--text);
  margin-bottom: 3px; letter-spacing: .02em;
}
.ref-credits-name a {
  color: var(--accent); text-decoration: none;
  border-bottom: 1px solid var(--accent-r);
  transition: border-color .15s;
}
.ref-credits-name a:hover { border-color: var(--accent); }
.ref-credits-desc {
  font-size: 11px; color: var(--dim); line-height: 1.5; font-weight: 300;
}

/* Key points list */
.ref-points { list-style: none; margin-bottom: 0; }
.ref-points li {
  display: flex; gap: 12px; align-items: baseline;
  font-size: 13px; line-height: 1.7; color: var(--dim);
  font-weight: 300; margin-bottom: 10px; padding-bottom: 10px;
  border-bottom: 1px solid var(--border);
}
.ref-points li:last-child { border-bottom: none; margin-bottom: 0; }
.ref-points li .rp-marker {
  color: var(--accent); font-size: 10px; letter-spacing: .08em;
  text-transform: uppercase; flex-shrink: 0; padding-top: 3px;
  min-width: 64px;
}
.ref-points li strong { color: var(--text); font-weight: 500; }

/* ── NODE INDEX ───────────────────────────────────────────────── */
.node-index-search {
  width: 100%; padding: 9px 14px;
  background: var(--surf2); border: 1px solid var(--border2);
  border-radius: 7px; color: var(--text); font-family: inherit;
  font-size: 12px; letter-spacing: .02em; margin-bottom: 24px;
  outline: none; transition: border-color .15s;
}
.node-index-search:focus { border-color: var(--accent-r); }
.node-index-search::placeholder { color: var(--muted); }

.node-index-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 28px 36px;
}
@media (max-width: 600px) {
  .node-index-grid { grid-template-columns: 1fr; }
}

.node-index-category { min-width: 0; }

.nic-label {
  font-size: 9px; text-transform: uppercase; letter-spacing: .14em;
  margin-bottom: 8px; font-weight: 500; padding-bottom: 6px;
  border-bottom: 1px solid var(--border);
}

.node-index-item {
  display: flex; flex-direction: column; gap: 1px;
  padding: 6px 8px; border-radius: 5px;
  cursor: pointer; margin-bottom: 1px;
  transition: background .12s;
}
.node-index-item:hover { background: var(--accent-b); }
.node-index-item:hover .nii-label { color: var(--accent); }

.nii-label {
  font-size: 11px; color: var(--text); font-weight: 500;
  letter-spacing: .02em; transition: color .12s;
}
.nii-short {
  font-size: 10px; color: var(--dim); line-height: 1.4; font-weight: 300;
}

/* ── BOTTOM DRAWER ───────────────────────────────────────────── */
#node-drawer {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  z-index: 14;
  background: var(--surf);
  border-top: 1px solid var(--border2);
  box-shadow: 0 -8px 32px rgba(0,0,0,.3);
}
#node-drawer.drawer-hidden { display: none; }

#node-drawer-toggle {
  width: 100%; padding: 10px 20px;
  background: transparent; border: none;
  color: var(--dim);
  font-family: 'JetBrains Mono', monospace;
  font-size: 11px; font-weight: 500; letter-spacing: .06em;
  cursor: pointer; display: flex; align-items: center;
  justify-content: center; gap: 8px;
  transition: color .15s;
}
#node-drawer-toggle:hover { color: var(--accent); }

#node-drawer-arrow {
  display: inline-block;
  transition: transform .3s cubic-bezier(.4,0,.2,1);
}
#node-drawer.open #node-drawer-arrow { transform: rotate(180deg); }

#node-drawer-body {
  max-height: 0; overflow: hidden;
  transition: max-height .35s cubic-bezier(.4,0,.2,1);
}
#node-drawer.open #node-drawer-body {
  max-height: 50vh;
  overflow-y: auto;
}
#node-drawer-body #node-index-section {
  padding: 4px 24px 20px;
}

/* ── MARKDOWN DESC STYLES ────────────────────────────────────── */
.p-desc p { margin: 0 0 10px; }
.p-desc p:last-child { margin-bottom: 0; }
.p-desc ul.md-list { margin: 6px 0 10px 18px; padding: 0; list-style: disc; }
.p-desc li { margin-bottom: 4px; line-height: 1.7; }
.p-desc strong { color: var(--text); font-weight: 600; }
.p-desc code.md-code {
  font-family: 'JetBrains Mono', monospace; font-size: 11px;
  background: var(--surf2); border: 1px solid var(--border2);
  border-radius: 3px; padding: 1px 5px; color: var(--accent);
}

/* ── KEYBOARD HINTS STRIP ────────────────────────────────────── */
#kb-hints {
  display: none; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
  z-index: 50; background: var(--surf2); border: 1px solid var(--border2);
  border-radius: 8px; padding: 8px 16px; gap: 16px;
  font-size: 10px; color: var(--dim); letter-spacing: .05em;
  font-family: 'JetBrains Mono', monospace;
}
#kb-hints.visible { display: flex; align-items: center; }
#kb-hints span { white-space: nowrap; }
#kb-hints .kb-close { cursor: pointer; color: var(--muted); margin-left: 8px; }

/* ── GITHUB LINK ─────────────────────────────────────────────── */
.github-link {
  display: flex; align-items: center;
  color: var(--muted); margin-left: auto;
  transition: color .15s;
}
.github-link:hover { color: var(--text); }
.github-icon { width: 16px; height: 16px; }

/* ── FOOTER ──────────────────────────────────────────────────── */
#site-footer {
  position: fixed; bottom: 0; left: 0; right: 0;
  display: flex; align-items: center; justify-content: center;
  padding: 8px 20px;
  background: linear-gradient(to top, var(--bg) 60%, transparent);
  font-family: 'JetBrains Mono', monospace;
  font-size: 11px; color: var(--muted);
  pointer-events: none;
  z-index: 10;
}

/* ── Guide Panel ─────────────────────────────────────── */
#guide-panel {
  display: none;
  position: fixed;
  inset: 48px 0 0 0;
  overflow-y: auto;
  background: var(--bg);
  z-index: 10;
  padding: 52px 24px 72px;
  scrollbar-width: thin;
  scrollbar-color: var(--border2) transparent;
}
#guide-panel::-webkit-scrollbar { width: 5px; }
#guide-panel::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 3px; }
#guide-panel.active { display: block; }

.tip-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 12px;
  margin-top: 20px;
}
.tip-card {
  display: flex;
  gap: 14px;
  align-items: flex-start;
  background: var(--surf2);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 16px;
}
.tip-icon {
  font-size: 18px;
  color: var(--accent);
  min-width: 24px;
  text-align: center;
  margin-top: 2px;
}
.tip-title {
  font-family: 'JetBrains Mono', monospace;
  font-size: 11px;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 4px;
  text-transform: uppercase;
  letter-spacing: 0.06em;
}
.tip-desc {
  font-size: 12px;
  color: var(--dim);
  line-height: 1.55;
}
kbd {
  font-family: 'JetBrains Mono', monospace;
  font-size: 10px;
  background: var(--surf2);
  border: 1px solid var(--border);
  border-radius: 3px;
  padding: 1px 5px;
  color: var(--text);
}
